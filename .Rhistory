plot_title <- pull(.data[1,], 1)[1]
fsd <- forage_density(.data, 'FeedCat', grid_size = 20, kern_bw = 250, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12, kd_extent = p.ext)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.6) +
layer_spatial(fsd, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA) +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
labs(subtitle = plot_title) +
theme_bw() +
theme(legend.title=element_text(size=10),
axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.y=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank()) +
guides(fill=FALSE)
}
gg_list_arrange <- function(.ggpltList){
n <- length(.ggpltList)
.ggpltList[[n]] <- .ggpltList[[n]] +
annotation_scale(location='tl')
nCol <- ceiling(sqrt(n))
do.call("grid.arrange", c(.ggpltList, ncol=nCol))
}
gg_list <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., RivOtter_FeedSigns)) %>%
gg_list_arrange(.)
gg_list <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., RivOtter_FeedSigns)) %>%
gg_list_arrange(.)
ggsave('run/maps/OtterSequence.png', width=30, height = 25, units = 'cm', dpi=600)
? ggsave
Otter_panel <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., RivOtter_FeedSigns)) %>%
gg_list_arrange(.)
fsd_ggplot <- function(.data, p.ext){
plot_title <- pull(.data[1,], 1)[1]
fsd <- forage_density(.data, 'FeedCat', grid_size = 20, kern_bw = 250, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12, kd_extent = p.ext)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.6) +
layer_spatial(fsd, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, trans = "log10") +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
labs(subtitle = plot_title) +
theme_bw() +
theme(legend.title=element_text(size=10),
axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.y=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank()) +
guides(fill=FALSE)
}
gg_list_arrange <- function(.ggpltList){
n <- length(.ggpltList)
.ggpltList[[n]] <- .ggpltList[[n]] +
annotation_scale(location='tl')
nCol <- ceiling(sqrt(n))
do.call("grid.arrange", c(.ggpltList, ncol=nCol))
}
Otter_panel <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., RivOtter_FeedSigns)) %>%
gg_list_arrange(.)
ggsave('run/maps/OtterSequence.png',plot = Otter_panel, dpi=600)
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 20, kern_bw = 100, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 20, kern_bw = 100, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-13)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 20, kern_bw = 100, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-16)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 20, kern_bw = 100, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 0)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 20, kern_bw = 100, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-17)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 20, kern_bw = 100, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-20)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 10, kern_bw = 50, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-20)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
writeRaster(out_ras, filename = 'run/ROBT_201920_10_50_TEST.tif', overwrite=TRUE)
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 25, kern_bw = 250, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-16)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 25, kern_bw = 250, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
writeRaster(out_ras, filename = 'run/ROBT_201920_25_250_TEST.tif', overwrite=TRUE)
writeRaster(out_ras, filename = 'run/ROBT_201920_25_250_TEST.tif', overwrite=TRUE)
ggplot() +
# annotation_map_tile(type = "osm", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Forage Density', trans='log') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.6) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
#
# quantile(out_ras, probs = 0.95)
#
# out_ras2 <- raster::projectRaster(out_ras, crs = sp::CRS('+init=EPSG:27700'))
# raster::NAvalue(out_ras2) <- 0
#
# out_ras2 <- out_ras^0.5
# out_ras2[out_ras2 == 0] <- NA
sp_test <- as_Spatial(ROBT_201920)
sp_test
st_as_sf(sp_test)
sf::st_crs(sp_test)
CoL_bounds <- st_as_sf(st_as_sfc(st_bbox(ROBT_201920)))
sf::st_crs(CoL_bounds)
CoL_bounds <- st_as_sf(st_as_sfc(st_bbox(out_ras)))
sf::st_crs(CoL_bounds)
sf::st_crs(CoL_bounds)$epsg
sf::st_crs(ROBT_201920)$epsg
CoL_bounds <- st_as_sf(st_as_sfc(st_bbox(out_ras)))
sprintf('+init=EPSG:%s', 27700)
devtools::load_all()
ROBT_201920 <- RivOtter_FeedSigns %>%
filter(SurveySeason == '2019 - 2020')
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 25, kern_bw = 250, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
st_crs(out_ras)
st_crs(out_ras)$epsg
devtools::load_all()
ROBT_201920 <- RivOtter_FeedSigns %>%
filter(SurveySeason == '2019 - 2020')
out_ras2 <- forage_density(ROBT_201920, 'FeedCat', grid_size = 25, kern_bw = 250, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
out_ras2 ==out_ras
out_ras2 == out_ras
out_ras2
out_ras
devtools::load_all()
devtools::load_all()
out_ras2 <- forage_density(ROBT_201920, 'FeedCat')
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 50, kern_bw = 500, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 50, kern_bw = 1000, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
devtools::load_all()
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 50, kern_bw = 1000, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 10, kern_bw = 1000, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
devtools::load_all()
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 10, kern_bw = 1000, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 100, kern_bw = 100, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
out_ras <- forage_density(ROBT_201920, 'FeedCat', grid_size = 25, kern_bw = 100, kd_weights = c(1, 1e+03, 1e+06),
low_thresh = 1e-12)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
devtools::load_all()
devtools::load_all()
fsd_ggplot <- function(.data, p.ext){
plot_title <- pull(.data[1,], 1)[1]
fsd <- forage_density(.data, 'FeedCat', kd_extent = p.ext)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.6) +
layer_spatial(fsd, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, trans = "log10") +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
labs(subtitle = plot_title) +
theme_bw() +
theme(legend.title=element_text(size=10),
axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.y=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank()) +
guides(fill=FALSE)
}
gg_list_arrange <- function(.ggpltList){
n <- length(.ggpltList)
.ggpltList[[n]] <- .ggpltList[[n]] +
annotation_scale(location='tl')
nCol <- ceiling(sqrt(n))
do.call("grid.arrange", c(.ggpltList, ncol=nCol))
}
Otter_panel <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., RivOtter_FeedSigns)) %>%
gg_list_arrange(.)
RivOtter_FeedSigns
devtools::load_all()
Otter_panel <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., RivOtter_FeedSigns)) %>%
gg_list_arrange(.)
out_ras <- forage_density(ROBT_201920, 'FeedCat')
devtools::load_all()
fsd_ggplot <- function(.data, p.ext){
plot_title <- pull(.data[1,], 1)[1]
fsd <- forage_density(.data, 'FeedCat', kd_extent = p.ext)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.6) +
layer_spatial(fsd, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, trans = "log10") +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
labs(subtitle = plot_title) +
theme_bw() +
theme(legend.title=element_text(size=10),
axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.y=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank()) +
guides(fill=FALSE)
}
gg_list_arrange <- function(.ggpltList){
n <- length(.ggpltList)
.ggpltList[[n]] <- .ggpltList[[n]] +
annotation_scale(location='tl')
nCol <- ceiling(sqrt(n))
do.call("grid.arrange", c(.ggpltList, ncol=nCol))
}
Otter_panel <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., RivOtter_FeedSigns)) %>%
gg_list_arrange(.)
devtools::load_all()
ROBT_201920 <- RivOtter_FeedSigns %>%
filter(SurveySeason == '2019 - 2020')
out_ras <- forage_density(ROBT_201920, 'FeedCat')
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
st_bbox(RivOtter_FeedSigns)
st_bbox(RivOtter_FeedSigns) + 50
target_ext <- st_bbox(RivOtter_FeedSigns) + 250
Otter_panel <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., target_ext)) %>%
gg_list_arrange(.)
ggsave('run/maps/OtterSequence.png',plot = Otter_panel, dpi=600)
target_ext <- st_bbox(RivOtter_FeedSigns) + 300
Otter_panel <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., target_ext)) %>%
gg_list_arrange(.)
target_ext <- st_bbox(RivOtter_FeedSigns) + 500
out_ras <- forage_density(ROBT_201920, 'FeedCat', kd_extent = target_ext)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
devtools::load_all()
target_ext <- st_bbox(RivOtter_FeedSigns) + 500
out_ras <- forage_density(ROBT_201920, 'FeedCat', kd_extent = target_ext)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
st_bbox(RivOtter_FeedSigns)
devtools::load_all()
devtools::load_all()
View(RivOtter_FeedSigns)
target_ext <- inflate_bbox(RivOtter_FeedSigns, 250)
target_ext
out_ras <- forage_density(ROBT_201920, 'FeedCat', kd_extent = target_ext)
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
# layer_spatial(ROBT_201920, alpha = 0.1) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
target_ext <- inflate_bbox(RivOtter_FeedSigns, 250)
Otter_panel <- RivOtter_FeedSigns %>%
group_by(SurveySeason) %>%
group_split()%>%
purrr::map(., ~fsd_ggplot(., target_ext)) %>%
gg_list_arrange(.)
ggsave('run/maps/OtterSequence.png',plot = Otter_panel, dpi=600)
writeRaster(out_ras, filename = 'run/Test.asc', overwrite=TRUE)
read_lines('run/Test.asc')
?writeRaster
asci <- read_lines('run/Test.asc')
asci <- read_lines('run/Test.asc') %>%
to_lower()
asci <- read_lines('run/Test.asc') %>%
tolower()
asci[1:4]
asci <- readr::read_lines('run/Test.asc') %>%
tolower() %>%
readr::write_lines('run/TestLC.asc')
devtools::document()
devtools::document()
warnings()
devtools::document()
?scale_fill_viridis_c
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = 27700, datum = sf::st_crs(27700)) +
theme_bw() +
theme(legend.title=element_text(size=10))
?annotation_scale
?coord_sf
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = sf::st_crs(out_ras), datum =  sf::st_crs(out_ras)) +
theme_bw() +
theme(legend.title=element_text(size=10))
ggplot() +
annotation_map_tile(type = "osmgrayscale", zoomin = 0, alpha = 0.4) +
layer_spatial(out_ras, alpha = 0.7) +
scale_fill_viridis_c(na.value = NA, name='Log10 Forage Density', trans='log10') +
coord_sf(crs = sf::st_crs(out_ras), datum =  sf::st_crs(out_ras)) +
theme_bw() +
theme(legend.title=element_text(size=10)) +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank(),
axis.title.y=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y=element_blank())
library(sf)
library(sp)
library(raster)
library(ggspatial)
library(gridExtra)
devtools::document()
devtools::load_all()
ROBT_201920 <- RivOtter_FeedSigns %>%
filter(SurveySeason == '2019 - 2020')
out_ras <- forage_density(ROBT_201920, 'FeedCat')
RivOtter_FeedSigns
